[{"comments":[{"id":"IC_kwDORPE6j87qsIiX","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Summary of Changes\n\nHello @wjohns989, I'm Gemini Code Assist[^1]! I'm currently reviewing this pull request and will post my feedback shortly. In the meantime, here's a summary to help you and other reviewers quickly get up to speed!\n\nThis pull request introduces a revised and more pragmatic 2026 vision and roadmap for Muninn, shifting focus towards local-first performance and deterministic outcomes. It course-corrects the initial high-complexity proposals by replacing over-engineered solutions with simpler, more robust alternatives, aiming to reclaim development hours and maintain a lightweight, high-performing system.\n\n### Highlights\n\n* **P2P Sync**: Removed P2P Sync entirely to focus on local execution context, abandoning cross-device CRDT synchronization due to its complexity and distraction from Muninn's core value proposition.\n* **Memory Governance**: Pivoted from RL-Driven retention to an Elo-Rated SNIPS retention system for dynamic decay, leveraging existing SNIPS retrieval feedback for higher ROI and lower latency without the non-determinism of RL.\n* **NLI Conflict Resolution**: Pivoted NLI logic to Temporal Shadowing and LLM merging during background consolidation, pushing conflict resolution to the existing 6-hour merge phase to avoid continuous, resource-intensive NLI inference.\n* **Parser Sandboxing**: Pivoted from WebAssembly (Wasm) to Strict OS-Level Subprocess Isolation for zero-trust parser sandboxing, using `subprocess.run` with aggressive resource limits for 90% of the safety with 10% of the complexity.\n\n<details>\n<summary><b>Changelog</b></summary>\n\n* **docs/plans/2026_FEASIBILITY_AUDIT.md**\n    * Documented the critical feasibility audit and course correction for the Muninn 2026 roadmap.\n    * Detailed the reasons for pivoting from complex solutions like P2P sync, RL-driven retention, continuous NLI, and Wasm-based sandboxing.\n    * Outlined the new, simpler approaches adopted for memory governance, conflict resolution, and parser isolation.\n* **docs/plans/MUNINN_2026_VISION_AND_ROADMAP.md**\n    * Documented the initial Muninn 2026 Vision & Capability Roadmap.\n    * Outlined the transition from a reactive memory store to a proactive cognitive architecture.\n    * Identified gaps and optimization opportunities, including RL-driven governance, parser sandboxing, cross-device CRDT sync, and live conflict resolution.\n</details>\n\n<details>\n<summary><b>Activity</b></summary>\n\n* No human activity (comments, reviews, etc.) has been recorded on this pull request yet.\n</details>\n\n<details>\n<summary><b>Using Gemini Code Assist</b></summary>\n<br>\n\nThe full guide for Gemini Code Assist can be found on our [documentation page](https://developers.google.com/gemini-code-assist/docs/review-github-code), here are some quick tips.\n\n<b>Invoking Gemini</b>\n\nYou can request assistance from Gemini at any point by creating a comment using either `/gemini <command>` or `@gemini-code-assist <command>`. Below is a summary of the supported commands on the current page.\n\nFeature | Command | Description\n--- | --- | ---\nCode Review | `/gemini review` | Performs a code review for the current pull request in its current state.\nPull Request Summary | `/gemini summary` | Provides a summary of the current pull request in its current state.\nComment | @gemini-code-assist | Responds in comments when explicitly tagged, both in pull request comments and review comments.\nHelp | `/gemini help` | Displays a list of available commands.\n\n<b>Customization</b>\n\nTo customize Gemini Code Assist for GitHub experience, repository maintainers can create a configuration file and/or provide a custom code review style guide (such as PEP-8 for Python) by creating and adding files to a `.gemini/` folder in the base of the repository. Detailed instructions can be found [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github).\n\n<b>Limitations & Feedback</b>\n\nGemini Code Assist may make mistakes. Please leave feedback on any instances where its feedback is incorrect or counter productive. You can react with :thumbsup: and :thumbsdown: on @gemini-code-assist comments. If you're interested in giving your feedback about your experience with Gemini Code Assist for Github and other Google products, sign up [here](https://google.qualtrics.com/jfe/form/SV_2cyuGuTWsEw84yG).\n\n<b>You can also get AI-powered code generation, chat, as well as code reviews directly in the IDE at no cost with the [Gemini Code Assist IDE Extension](https://cloud.google.com/products/gemini/code-assist).</b>\n</details>\n\n\n[^1]: Review the [Privacy Notices](https://policies.google.com/privacy), [Generative AI Prohibited Use Policy](https://policies.google.com/terms/generative-ai/use-policy), [Terms of Service](https://policies.google.com/terms), and learn how to configure Gemini Code Assist in GitHub [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github). Gemini can make mistakes, so double check it and [use code with caution](https://support.google.com/legal/answer/13505487).\n","createdAt":"2026-02-20T22:23:36Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/52#issuecomment-3937437847","viewerDidAuthor":false}],"number":52,"reviews":[{"id":"PRR_kwDORPE6j87kjVal","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Code Review\n\nThis pull request aims to replace an ambitious, high-complexity roadmap with a more pragmatic and feasible version, documented in a new feasibility audit file. While the audit document clearly outlines the course correction, this PR also introduces `MUNINN_2026_VISION_AND_ROADMAP.md`, which appears to be the old, now-obsolete plan. This creates a critical contradiction within the project's planning documents, undermining the clarity and logic mandated by the SOTA+ development philosophy. The roadmap must be reconciled with the feasibility audit to ensure the project's direction is unambiguous.","submittedAt":"2026-02-20T22:24:28Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"8116fa66616ce0fe7e24b4b87c4bbff9944e791d"}},{"id":"PRR_kwDORPE6j87kjVht","author":{"login":"chatgpt-codex-connector"},"authorAssociation":"NONE","body":"\n### üí° Codex Review\n\nHere are some automated review suggestions for this pull request.\n\n**Reviewed commit:** `8116fa6661`\n    \n\n<details> <summary>‚ÑπÔ∏è About Codex in GitHub</summary>\n<br/>\n\n[Your team has set up Codex to review pull requests in this repo](http://chatgpt.com/codex/settings/general). Reviews are triggered when you\n- Open a pull request for review\n- Mark a draft as ready\n- Comment \"@codex review\".\n\nIf Codex has suggestions, it will comment; otherwise it will react with üëç.\n\n\n\n\nCodex can also answer questions or update the PR. Try commenting \"@codex address that feedback\".\n            \n</details>","submittedAt":"2026-02-20T22:24:39Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"8116fa66616ce0fe7e24b4b87c4bbff9944e791d"}}],"title":"docs(planning): Pragmatic 2026 Vision and Roadmap (Course-Corrected)"},{"comments":[{"id":"IC_kwDORPE6j87qrPMX","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Summary of Changes\n\nHello @wjohns989, I'm Gemini Code Assist[^1]! I'm currently reviewing this pull request and will post my feedback shortly. In the meantime, here's a summary to help you and other reviewers quickly get up to speed!\n\nThis pull request introduces the comprehensive \"Muninn 2026 Vision & Capability Roadmap\" document. The roadmap outlines the strategic shift for Muninn from a reactive memory store to a proactive cognitive architecture, addressing identified gaps from the v3.3 implementation. It details future architectural enhancements, feature expansions, and optimization parameters, including advanced memory governance, enhanced security for data ingestion, improved cognitive integration, and robust data synchronization.\n\n### Highlights\n\n* **RL-Driven Memory Governance**: Introduced a concept for policy-aware memory governance using Q-learning agents to dynamically adjust memory decay and importance based on retrieval success and user feedback.\n* **Zero-Trust Parser Sandboxing**: Proposed isolating parsing engines for untrusted binary formats (like DOCX, PDF) using chroot or WebAssembly runtimes to prevent exploitation during ingestion.\n* **Episodic Context Reconstruction**: Outlined a method for agents to \"time-travel\" and reconstruct project history by implementing strictly bi-temporal queries in Kuzu, ensuring append-only updates.\n* **P2P Federation**: Detailed plans for cross-device P2P synchronization of procedural and semantic memories using Merkle-DAG based CRDTs.\n* **Preemptive Debugging & Risk Mitigation**: Identified and proposed mitigation strategies for anticipated issues such as SQLite write locking, memory bloat from LLM outputs, xLAM JSON instability, and graph edge explosion.\n\n<details>\n<summary><b>Changelog</b></summary>\n\n* **docs/plans/MUNINN_2026_VISION_AND_ROADMAP.md**\n    * Added the Muninn 2026 Vision & Capability Roadmap document, detailing future architectural changes and strategic objectives.\n</details>\n\n<details>\n<summary><b>Activity</b></summary>\n\n* The `eval.phase_hygiene` verification suite passed successfully, indicating initial validation of the proposed changes.\n</details>\n\n<details>\n<summary><b>Using Gemini Code Assist</b></summary>\n<br>\n\nThe full guide for Gemini Code Assist can be found on our [documentation page](https://developers.google.com/gemini-code-assist/docs/review-github-code), here are some quick tips.\n\n<b>Invoking Gemini</b>\n\nYou can request assistance from Gemini at any point by creating a comment using either `/gemini <command>` or `@gemini-code-assist <command>`. Below is a summary of the supported commands on the current page.\n\nFeature | Command | Description\n--- | --- | ---\nCode Review | `/gemini review` | Performs a code review for the current pull request in its current state.\nPull Request Summary | `/gemini summary` | Provides a summary of the current pull request in its current state.\nComment | @gemini-code-assist | Responds in comments when explicitly tagged, both in pull request comments and review comments.\nHelp | `/gemini help` | Displays a list of available commands.\n\n<b>Customization</b>\n\nTo customize Gemini Code Assist for GitHub experience, repository maintainers can create a configuration file and/or provide a custom code review style guide (such as PEP-8 for Python) by creating and adding files to a `.gemini/` folder in the base of the repository. Detailed instructions can be found [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github).\n\n<b>Limitations & Feedback</b>\n\nGemini Code Assist may make mistakes. Please leave feedback on any instances where its feedback is incorrect or counter productive. You can react with :thumbsup: and :thumbsdown: on @gemini-code-assist comments. If you're interested in giving your feedback about your experience with Gemini Code Assist for Github and other Google products, sign up [here](https://google.qualtrics.com/jfe/form/SV_2cyuGuTWsEw84yG).\n\n<b>You can also get AI-powered code generation, chat, as well as code reviews directly in the IDE at no cost with the [Gemini Code Assist IDE Extension](https://cloud.google.com/products/gemini/code-assist).</b>\n</details>\n\n\n[^1]: Review the [Privacy Notices](https://policies.google.com/privacy), [Generative AI Prohibited Use Policy](https://policies.google.com/terms/generative-ai/use-policy), [Terms of Service](https://policies.google.com/terms), and learn how to configure Gemini Code Assist in GitHub [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github). Gemini can make mistakes, so double check it and [use code with caution](https://support.google.com/legal/answer/13505487).\n","createdAt":"2026-02-20T21:18:10Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/51#issuecomment-3937202967","viewerDidAuthor":false}],"number":51,"reviews":[{"id":"PRR_kwDORPE6j87kihdy","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Code Review\n\nThe pull request introduces a comprehensive roadmap document for Muninn's 2026 vision, outlining new features, identified gaps, and risk mitigation strategies. The document is well-structured and provides a clear direction for future development. I've focused my review on ensuring clarity and adherence to the SOTA+ development philosophy, particularly regarding the avoidance of placeholders and ensuring optimal reasoning in the planning document itself.","submittedAt":"2026-02-20T21:19:34Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"0c99feeb6146a009a6fdde26b8ccdd9c56ac50d5"}}],"title":"docs(planning): Muninn 2026 Vision and Roadmap"},{"comments":[{"id":"IC_kwDORPE6j87qpDAz","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Summary of Changes\n\nHello @wjohns989, I'm Gemini Code Assist[^1]! I'm currently reviewing this pull request and will post my feedback shortly. In the meantime, here's a summary to help you and other reviewers quickly get up to speed!\n\nThis pull request significantly advances the Muninn memory system by integrating state-of-the-art LLM agent memory and cognitive architecture enhancements. It introduces an LLM-powered synthesis capability for multi-hop memory hunts, making discovery narratives more accessible, and enhances the dashboard with a dedicated \"Hunt Mode\" UI. Critical bug fixes improve the reliability of Scout's retrieval and correct dashboard interactions. Furthermore, the documentation has been updated to outline future phases, including RL-driven memory governance, episodic context reconstruction, and multimodal capabilities, laying the groundwork for more sophisticated AI agent interactions.\n\n### Highlights\n\n* **Scout LLM Synthesis**: Implemented a new capability for Scout to generate concise LLM-powered narratives explaining multi-hop memory discovery paths, enhancing context understanding.\n* **Dashboard Hunt Mode**: Introduced a dedicated 'Scout Hunt Mode' in the dashboard UI, allowing users to toggle agentic discovery and view LLM-generated synthesis for search results.\n* **Critical Scout Re-Rank Fix**: Resolved a P0 bug in Scout's hybrid retrieval that caused all records to be incorrectly rejected during final re-ranking due to synthetic filter keys.\n* **MCP Synthesis Exposure**: Ensured the MCP's `hunt_memory` handler explicitly requests LLM synthesis and correctly injects the narrative into the tool's result data for agent visibility.\n* **Dashboard Endpoint Corrections**: Fixed incorrect API endpoint calls in the dashboard for memory ingestion (now `/add`) and consolidation (now `/consolidation/run`), improving UI functionality.\n* **Future Architectural Enhancements**: Updated planning documents to outline future phases, including RL-driven Policy-Aware Memory Governance, E-mem Episodic Context Reconstruction, Cognitive Architecture (CoALA) Integration, Deterministic Outer Loops, and Multimodal Hive Mind Operations.\n* **Comprehensive Test Coverage**: Added new test suites (`test_v3_18_0_phase19.py`, `test_v3_18_1_bugfixes.py`) to validate the new synthesis features, hunt endpoint behavior, and critical bug fixes.\n\n<details>\n<summary><b>Changelog</b></summary>\n\n* **HANDOFF.md**\n    * Updated development status, branch, and version to `v3.18.1` and Phase 19 progress.\n    * Increased the reported number of passing tests.\n    * Added detailed summaries for `v3.18.1` (Scout re-rank fix, MCP synthesis exposure, dashboard endpoint fixes) and `v3.18.0` (Scout LLM synthesis, dashboard hunt mode).\n    * Updated the 'Future Work' and 'Validation History' sections to include Phase 19 items and test results.\n* **SOTA_PLUS_PLAN.md**\n    * Expanded future development plans to include advanced memory governance, episodic context, cognitive architecture, and multimodal operations.\n    * Added new objectives for Policy-Aware Memory Governance (RL-Driven), E-mem Episodic Context Reconstruction, and Cognitive Architecture (CoALA) Integration.\n    * Introduced new sections for 'Phase 19: Deterministic Outer Loops & Verification' and 'Phase 20: Multimodal Hive Mind Operations'.\n    * Added blank lines for improved readability in several sections.\n* **dashboard.html**\n    * Enhanced the search interface with a Scout Hunt mode toggle and dynamic button label updates.\n    * Refactored `handleSearch()` to support both standard and hunt modes, display loading states, and render LLM synthesis narratives.\n    * Corrected the `handleIngest()` function to use the `/add` endpoint with the correct payload and success check.\n    * Fixed `forceConsolidation()` to call the correct `/consolidation/run` endpoint.\n    * Adjusted result parsing to correctly display memory content and metadata.\n* **muninn/mcp/handlers.py**\n    * Modified `_do_hunt_memory` to always send `synthesize: True` in the payload to the `/search/hunt` endpoint.\n    * Implemented logic to inject the `synthesis` narrative from the server response into the `data` list as a `synthesis_narrative` object, making it visible to the LLM.\n* **muninn/retrieval/hybrid.py**\n    * Defined `_SYNTHETIC_FILTER_KEYS` to include `memory_ids` and `scope`.\n    * Updated `_record_matches_constraints` to skip these synthetic filter keys during in-memory re-evaluation, preventing incorrect record rejection.\n* **muninn/retrieval/scout.py**\n    * Refined the fallback search mechanism in `hunt()` to correctly broaden the search scope by explicitly passing `namespaces=None` instead of `filters={'scope': 'global'}`.\n* **muninn/retrieval/synthesis.py**\n    * Added a new module `synthesis.py` containing `synthesize_hunt_results` function.\n    * Implemented LLM-powered narrative summaries for multi-hop memory hunt results using Anthropic's `claude-haiku` model.\n    * Included graceful degradation for missing SDK or API key, and API call failures.\n* **muninn/version.py**\n    * Updated the `__version__` string to `3.18.1`.\n* **pyproject.toml**\n    * Updated the project `version` to `3.18.1`.\n* **server.py**\n    * Imported `synthesize_hunt_results` from the new synthesis module.\n    * Added a `synthesize: bool = False` field to the `HuntMemoryRequest` Pydantic model.\n    * Modified `hunt_memory_endpoint` to conditionally call `synthesize_hunt_results` and include the generated synthesis in the response.\n    * Updated the docstring for `hunt_memory_endpoint` to reflect the new synthesis capability.\n* **tests/test_v3_17_0_legacy_scout.py**\n    * Added a new test `test_fallback_does_not_use_broken_scope_filter` to verify that the Scout fallback search correctly handles namespace restrictions.\n* **tests/test_v3_18_0_phase19.py**\n    * Added a new test file for Phase 19 features.\n    * Included `TestScoutSynthesis` for `synthesize_hunt_results` (graceful degradation, API calls, truncation).\n    * Included `TestHuntEndpointSynthesize` for `HuntMemoryRequest.synthesize` field and endpoint response.\n    * Included `TestVersionBump318` for version consistency.\n* **tests/test_v3_18_1_bugfixes.py**\n    * Added a new test file for `v3.18.1` bug fixes.\n    * Included `TestHybridSyntheticKeySkip` for `_record_matches_constraints` logic.\n    * Included `TestMCPHuntSynthesisExposure` for `_do_hunt_memory` payload and synthesis injection.\n    * Included `TestVersionBump3181` for version consistency.\n</details>\n\n<details>\n<summary><b>Using Gemini Code Assist</b></summary>\n<br>\n\nThe full guide for Gemini Code Assist can be found on our [documentation page](https://developers.google.com/gemini-code-assist/docs/review-github-code), here are some quick tips.\n\n<b>Invoking Gemini</b>\n\nYou can request assistance from Gemini at any point by creating a comment using either `/gemini <command>` or `@gemini-code-assist <command>`. Below is a summary of the supported commands on the current page.\n\nFeature | Command | Description\n--- | --- | ---\nCode Review | `/gemini review` | Performs a code review for the current pull request in its current state.\nPull Request Summary | `/gemini summary` | Provides a summary of the current pull request in its current state.\nComment | @gemini-code-assist | Responds in comments when explicitly tagged, both in pull request comments and review comments.\nHelp | `/gemini help` | Displays a list of available commands.\n\n<b>Customization</b>\n\nTo customize Gemini Code Assist for GitHub experience, repository maintainers can create a configuration file and/or provide a custom code review style guide (such as PEP-8 for Python) by creating and adding files to a `.gemini/` folder in the base of the repository. Detailed instructions can be found [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github).\n\n<b>Limitations & Feedback</b>\n\nGemini Code Assist may make mistakes. Please leave feedback on any instances where its feedback is incorrect or counter productive. You can react with :thumbsup: and :thumbsdown: on @gemini-code-assist comments. If you're interested in giving your feedback about your experience with Gemini Code Assist for Github and other Google products, sign up [here](https://google.qualtrics.com/jfe/form/SV_2cyuGuTWsEw84yG).\n\n<b>You can also get AI-powered code generation, chat, as well as code reviews directly in the IDE at no cost with the [Gemini Code Assist IDE Extension](https://cloud.google.com/products/gemini/code-assist).</b>\n</details>\n\n\n[^1]: Review the [Privacy Notices](https://policies.google.com/privacy), [Generative AI Prohibited Use Policy](https://policies.google.com/terms/generative-ai/use-policy), [Terms of Service](https://policies.google.com/terms), and learn how to configure Gemini Code Assist in GitHub [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github). Gemini can make mistakes, so double check it and [use code with caution](https://support.google.com/legal/answer/13505487).\n","createdAt":"2026-02-20T19:13:41Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/50#issuecomment-3936628787","viewerDidAuthor":false}],"number":50,"reviews":[{"id":"PRR_kwDORPE6j87kg0_P","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Code Review\n\nThis pull request introduces significant enhancements, including a 'Scout Hunt mode' with LLM-based synthesis for search results, and updates documentation to reflect future architectural plans. It also includes several important bug fixes, such as correcting the `Scout re-ranking logic`, fixing `dashboard endpoint calls`, and improving the `search fallback mechanism`. However, a potential data leakage vulnerability was identified in the `hybrid retrieval logic`. Specifically, the final filtering stage incorrectly treats the `scope` attribute as a synthetic key, skipping its validation and potentially allowing project-specific memories to leak into global search results when retrieved via non-vector signals like `BM25` or `Graph search`. Additionally, I have a couple of minor suggestions to improve documentation clarity and code robustness, particularly regarding specific exception handling for external client interactions.","submittedAt":"2026-02-20T19:16:33Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"27acbf86d5aa77c8c8121bf72d9d9e7545ae5a78"}},{"id":"PRR_kwDORPE6j87kg2kl","author":{"login":"chatgpt-codex-connector"},"authorAssociation":"NONE","body":"\n### üí° Codex Review\n\nHere are some automated review suggestions for this pull request.\n\n**Reviewed commit:** `27acbf86d5`\n    \n\n<details> <summary>‚ÑπÔ∏è About Codex in GitHub</summary>\n<br/>\n\n[Your team has set up Codex to review pull requests in this repo](http://chatgpt.com/codex/settings/general). Reviews are triggered when you\n- Open a pull request for review\n- Mark a draft as ready\n- Comment \"@codex review\".\n\nIf Codex has suggestions, it will comment; otherwise it will react with üëç.\n\n\n\n\nCodex can also answer questions or update the PR. Try commenting \"@codex address that feedback\".\n            \n</details>","submittedAt":"2026-02-20T19:17:58Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"27acbf86d5aa77c8c8121bf72d9d9e7545ae5a78"}}],"title":"docs: Integrate 2025/2026 SOTA+ agent memory and cognitive architecture enhancements"},{"comments":[{"id":"IC_kwDORPE6j87qjreZ","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Summary of Changes\n\nHello @wjohns989, I'm Gemini Code Assist[^1]! I'm currently reviewing this pull request and will post my feedback shortly. In the meantime, here's a summary to help you and other reviewers quickly get up to speed!\n\nThis pull request significantly enhances the Muninn memory system by integrating an LLM-powered synthesis feature for its multi-hop discovery (Scout Hunt) mode. This allows users to receive concise, AI-generated explanations of complex search results directly within the dashboard. Alongside this new capability, a critical bug affecting the dashboard's search functionality was resolved, ensuring data is correctly parsed and displayed. The changes collectively improve the clarity and reliability of the memory retrieval system.\n\n### Highlights\n\n* **Scout LLM Synthesis**: A new module `muninn/retrieval/synthesis.py` was introduced to generate 2-3 sentence narratives using `AsyncAnthropic` (claude-haiku-4-5) for multi-hop discovery results, with robust graceful degradation.\n* **Dashboard Hunt Mode Integration**: A 'Scout Hunt' toggle was added to the dashboard's search tab, allowing users to switch between standard `/search` and `/search/hunt` modes. This includes displaying the LLM-generated synthesis and dynamically updating the search button label.\n* **Dashboard Search Bug Fix**: The `handleSearch()` function in `dashboard.html` was corrected to properly access search results using `data.data` and flat field names (`r.memory_type`, `r.memory`), resolving a previously broken search functionality.\n* **API Endpoint Enhancement**: The `/search/hunt` endpoint in `server.py` was updated to accept an optional `synthesize` boolean, triggering the LLM synthesis and including the narrative in the response.\n* **Comprehensive Testing**: A new test suite `tests/test_v3_18_0_phase19.py` was added, comprising 15 tests covering the synthesis function's degradation and happy paths, endpoint field checks, and version consistency.\n* **Version Update**: The project version was incremented to `3.18.0` across `muninn/version.py` and `pyproject.toml`.\n\n<details>\n<summary><b>Changelog</b></summary>\n\n* **HANDOFF.md**\n    * Updated development status to reflect Phase 19 in progress and increased test count to 1005.\n    * Added a detailed summary for Phase 19 (v3.18.0) outlining the new Scout LLM Synthesis and Dashboard Hunt Mode features.\n* **dashboard.html**\n    * Implemented a 'Scout Hunt Mode' toggle with descriptive text in the search tab.\n    * Modified the `handleSearch()` JavaScript function to support the new hunt mode, dynamically update the search button label, and display LLM synthesis results.\n    * Corrected data access within `handleSearch()` to fix a bug where `data.results` and nested `r.memory` fields were incorrectly referenced.\n* **muninn/retrieval/synthesis.py**\n    * Added a new Python module containing the `synthesize_hunt_results` asynchronous function.\n    * Implemented logic to use Anthropic's Claude-Haiku model for generating 2-3 sentence narratives from search results.\n    * Included graceful degradation mechanisms for cases where the Anthropic SDK is not installed, the API key is missing, or the API call fails.\n* **muninn/version.py**\n    * Updated the `__version__` string to `3.18.0`.\n* **pyproject.toml**\n    * Updated the project `version` field to `3.18.0`.\n* **server.py**\n    * Imported the `synthesize_hunt_results` function.\n    * Added a `synthesize: bool = False` field to the `HuntMemoryRequest` Pydantic model.\n    * Modified the `hunt_memory_endpoint` to conditionally call `synthesize_hunt_results` when `synthesize` is true and include the generated narrative in the API response.\n* **tests/test_v3_18_0_phase19.py**\n    * Added a new test file with 15 tests.\n    * Included tests for `synthesize_hunt_results` covering graceful degradation (missing SDK, no API key, empty results, API exceptions), snippet truncation, and maximum snippet limits.\n    * Added tests for the `HuntMemoryRequest` model's `synthesize` field and the `/search/hunt` endpoint's response structure and synthesis call behavior.\n    * Implemented tests to verify version consistency between `muninn.version` and `pyproject.toml`.\n</details>\n\n<details>\n<summary><b>Activity</b></summary>\n\n* The pull request introduces new features and fixes, indicating active development.\n* The changes include a comprehensive test plan with specific `pytest` commands and dashboard verification steps.\n* The PR description notes that it was 'Generated with Claude Code', suggesting AI assistance in its creation.\n</details>\n\n<details>\n<summary><b>Using Gemini Code Assist</b></summary>\n<br>\n\nThe full guide for Gemini Code Assist can be found on our [documentation page](https://developers.google.com/gemini-code-assist/docs/review-github-code), here are some quick tips.\n\n<b>Invoking Gemini</b>\n\nYou can request assistance from Gemini at any point by creating a comment using either `/gemini <command>` or `@gemini-code-assist <command>`. Below is a summary of the supported commands on the current page.\n\nFeature | Command | Description\n--- | --- | ---\nCode Review | `/gemini review` | Performs a code review for the current pull request in its current state.\nPull Request Summary | `/gemini summary` | Provides a summary of the current pull request in its current state.\nComment | @gemini-code-assist | Responds in comments when explicitly tagged, both in pull request comments and review comments.\nHelp | `/gemini help` | Displays a list of available commands.\n\n<b>Customization</b>\n\nTo customize Gemini Code Assist for GitHub experience, repository maintainers can create a configuration file and/or provide a custom code review style guide (such as PEP-8 for Python) by creating and adding files to a `.gemini/` folder in the base of the repository. Detailed instructions can be found [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github).\n\n<b>Limitations & Feedback</b>\n\nGemini Code Assist may make mistakes. Please leave feedback on any instances where its feedback is incorrect or counter productive. You can react with :thumbsup: and :thumbsdown: on @gemini-code-assist comments. If you're interested in giving your feedback about your experience with Gemini Code Assist for Github and other Google products, sign up [here](https://google.qualtrics.com/jfe/form/SV_2cyuGuTWsEw84yG).\n\n<b>You can also get AI-powered code generation, chat, as well as code reviews directly in the IDE at no cost with the [Gemini Code Assist IDE Extension](https://cloud.google.com/products/gemini/code-assist).</b>\n</details>\n\n\n[^1]: Review the [Privacy Notices](https://policies.google.com/privacy), [Generative AI Prohibited Use Policy](https://policies.google.com/terms/generative-ai/use-policy), [Terms of Service](https://policies.google.com/terms), and learn how to configure Gemini Code Assist in GitHub [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github). Gemini can make mistakes, so double check it and [use code with caution](https://support.google.com/legal/answer/13505487).\n","createdAt":"2026-02-20T14:31:12Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/49#issuecomment-3935221657","viewerDidAuthor":false}],"number":49,"reviews":[{"id":"PRR_kwDORPE6j87kbRz2","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Code Review\n\nThis pull request introduces Scout LLM synthesis and a new hunt mode for the dashboard, along with several bug fixes for search result rendering. While the integration is well-structured and follows the established async patterns, there are concerns regarding resource management in the synthesis logic and the correctness of the LLM model identifier. Additionally, the namespace display logic in the dashboard appears to rely on a field that is not present in the current server response schema.","submittedAt":"2026-02-20T14:33:46Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"b1d27111adbfdcc4b9f379e1639eda377d350fc3"}}],"title":"feat(phase19): Scout LLM synthesis + dashboard hunt mode + bugfixes (v3.18.1)"},{"comments":[{"id":"IC_kwDORPE6j87qUvkx","author":{"login":"chatgpt-codex-connector"},"authorAssociation":"NONE","body":"You have reached your Codex usage limits for code reviews. You can see your limits in the [Codex usage dashboard](https://chatgpt.com/codex/settings/usage).\nTo continue using code reviews, you can upgrade your account or add credits to your account and enable them for code reviews in your [settings](https://chatgpt.com/codex/settings/code-review).","createdAt":"2026-02-20T02:53:39Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/48#issuecomment-3931306289","viewerDidAuthor":false},{"id":"IC_kwDORPE6j87qUv8J","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Summary of Changes\n\nHello @wjohns989, I'm Gemini Code Assist[^1]! I'm currently reviewing this pull request and will post my feedback shortly. In the meantime, here's a summary to help you and other reviewers quickly get up to speed!\n\nThis pull request significantly enhances the Muninn memory engine by introducing robust legacy AI assistant data discovery and selective ingestion capabilities, alongside a complete overhaul of the dashboard's user interface for improved usability and security. It also includes a new CLI utility for secure token management and addresses several critical bugs and security vulnerabilities identified during a comprehensive code review, ensuring a more stable, secure, and feature-rich experience.\n\n### Highlights\n\n* **Legacy Discovery Auto-Scan & Selective Ingestion**: Implemented comprehensive data discovery for legacy AI assistant tools (Aider, Continue.dev, Zed AI) and enhanced the UI for selective ingestion, ensuring discovery is always available regardless of ingestion feature flag status.\n* **New AI Assistant Provider Support**: Added support for discovering and parsing data from Aider, Continue.dev, and Zed AI, expanding the range of integrated AI tools.\n* **Dashboard UI/UX Overhaul**: Revamped the dashboard with a new visual design, improved navigation, an 8-column legacy table, and enhanced scan/import progress feedback.\n* **Critical Bug Fixes**: Resolved a critical bug preventing legacy discovery in default deployments by ensuring the discovery pipeline does not enforce the `multi_source_ingestion` feature flag.\n* **Security Enhancements**: Addressed all Gemini Code Assist security findings, including multiple XSS vulnerabilities in the dashboard, corrected CORS configuration, and improved token file permissions on Unix systems.\n* **CLI Token Rotation Utility**: Introduced a new CLI command (`muninn.cli rotate-token`) to securely generate and rotate authentication tokens, automatically updating MCP host configurations and providing platform-specific instructions.\n* **Internal Code Refinements & Bug Fixes**: Improved `calculate_frequency` clamping, added missing RRF signals to `WeightAdapter`, fixed task error handling in MCP, optimized SQLite queries for large ID lists, and removed duplicate OTel initialization.\n\n<details>\n<summary><b>Changelog</b></summary>\n\n* **HANDOFF.md**\n    * Updated version and branch information to reflect Phase 18 progress and Phase 17 merge status.\n    * Adjusted test pass counts to include new Phase 18 tests.\n    * Revised 'Open Items / Next Steps' to detail Phase 18 deliverables and re-categorize Phase 19 candidates.\n* **SOTA_PLUS_PLAN.md**\n    * Updated 'Future Work' section to reflect Phase 19 candidates.\n    * Added a detailed section for 'Phase 18: CI Benchmark Workflow & Token Rotation', outlining its goals and tracks.\n    * Included ROI/Optimization notes for CI dry-run gate and token rotation.\n    * Added `MUNINN_TOKEN_FILE` to Phase 18 environment variables.\n    * Updated validation history to include Phase 18 test results and corrected Phase 17 details.\n* **dashboard.html**\n    * Refactored HTML structure and CSS for a modern, app-like interface with a sidebar navigation.\n    * Implemented new color palette, typography, and responsive design for improved aesthetics and usability.\n    * Introduced separate views for 'Overview', 'Ingestion', 'Legacy Import', and 'System' with dynamic content switching.\n    * Added new UI components like 'Magic Search Bar', 'Stats Grid', and a simple 'Graph Viz' canvas.\n    * Enhanced legacy import table with 8 columns (Import, Provider, Parser, Confidence, Size, Modified, Path, Notes) and improved formatting for bytes and dates.\n    * Implemented XSS prevention measures by replacing `innerHTML` with `textContent` or using DOM text nodes for server-supplied data.\n    * Updated JavaScript logic to reflect new UI elements, including navigation, status indicators, and form field IDs.\n    * Removed hardcoded `ingest-chunk-size`, `ingest-chunk-overlap`, `ingest-min-chunk` from UI, making them hidden inputs.\n    * Improved log display with timestamps and colored status indicators (ok, warn, err).\n* **muninn/cli.py**\n    * Added new CLI utility for token rotation, including generation of URL-safe tokens.\n    * Implemented functionality to write tokens to a specified file (default: `.muninn_token`) with appropriate Unix permissions.\n    * Developed logic to patch `MUNINN_AUTH_TOKEN` in auto-detected MCP host configuration files (Claude Desktop, Cursor, VS Code).\n    * Provided platform-specific instructions for applying new tokens in PowerShell and Bash/Zsh.\n    * Included `--dry-run` and `--token-only` options for testing and machine-readable output.\n* **muninn/consolidation/promote.py**\n    * Updated log message format for memory promotion from '‚Üí' to '->' for consistency.\n* **muninn/core/memory.py**\n    * Refactored `initialize` method to read feature flags once, avoiding duplicate `OTelGenAITracer` initialization.\n    * Ensured `HybridRetriever` is initialized with the already-constructed OTel instance, removing a post-hoc patch.\n    * Added `_require_discovery_pipeline()` method to provide an `IngestionPipeline` for discovery without enforcing the `multi_source_ingestion` feature flag, allowing read-only scans in all deployments.\n* **muninn/ingestion/discovery.py**\n    * Added new AI assistant providers: `aider_chat`, `continue_dev`, and `zed_ai` with their respective discovery patterns.\n    * Updated `gemini_cli` patterns to specifically target `~/.gemini/tmp/<project-hash>/chats/*.json` for saved sessions.\n    * Included `xdg_data` path for Linux Zed AI discovery.\n* **muninn/ingestion/parser.py**\n    * Added `.zed` extension to `SUPPORTED_EXTENSIONS` and mapped it to the 'text' parser for Zed AI conversation files.\n* **muninn/mcp/handlers.py**\n    * Removed hardcoded debug log file writes (`mcp_debug.log`) from `handle_call_tool_with_task` and related functions.\n    * Changed task error handling in `handle_get_task_result` to use the JSON-RPC error channel (`send_error_fn`) instead of the result channel for failed tasks.\n* **muninn/retrieval/weight_adapter.py**\n    * Updated `DEFAULT_WEIGHTS` to include 'chain' and 'goal' signals, ensuring all six RRF signals are considered for entropy-based adaptation.\n* **muninn/scoring/importance.py**\n    * Modified `calculate_frequency` to clamp its return value to a maximum of 1.0, preventing values greater than 1 for high access counts.\n    * Updated `calculate_importance` to use `.get()` with `DEFAULT_WEIGHTS` fallback, providing a KeyError guard for partial custom weight dictionaries.\n* **muninn/store/sqlite_metadata.py**\n    * Implemented chunking for `get_by_ids` method to handle large lists of memory IDs, avoiding SQLite's 'too many SQL variables' error (limit 999).\n    * Added escaping for `LIKE` metacharacters (`%`, `_`, `\\`) in `search_content` to treat them as literals, preventing unintended wildcard matches.\n    * Deduplicated `snips_total` and `snips_sum_w` variables in `get_feedback_signal_multipliers`, consolidating to `snips_sum_w` for SNIPS denominator and Kish ESS calculations.\n* **muninn/version.py**\n    * Updated the package version to `3.15.0`.\n* **pyproject.toml**\n    * Updated the project version to `3.15.0`.\n* **server.py**\n    * Added `CORSMiddleware` to the FastAPI application, allowing cross-origin requests from the static dashboard while correctly configuring `allow_credentials=False` as per Fetch spec.\n* **tests/test_ingestion_discovery.py**\n    * Added tests for `.zed` extension support in `SUPPORTED_EXTENSIONS`.\n    * Included tests to verify the presence of new providers (`aider_chat`, `continue_dev`, `zed_ai`) in `_provider_specs`.\n    * Added tests for `gemini_cli`'s updated `tmp/chats` pattern.\n    * Implemented tests for successful discovery and parser support of Aider, Continue.dev, and Zed AI sources.\n    * Added a test for `_require_discovery_pipeline()` to ensure it functions correctly even when `multi_source_ingestion` is disabled.\n* **tests/test_v3_14_0_benchmark_suite.py**\n    * Updated version assertion to check for `>= 3.14.0` in `muninn.version`.\n    * Modified `pyproject.toml` version check to use regex and compare against `muninn.version` for consistency.\n* **tests/test_v3_15_0_ci_token_rotation.py**\n    * Added new test suite for Phase 18 features, covering CI workflow YAML structure, `muninn.cli rotate-token` command, token file persistence, MCP config patching, and version bump validation.\n* **tests/test_v3_15_0_kaizen_fixes.py**\n    * Added new test suite for various Kaizen review fixes, including removal of debug logs, `calculate_frequency` clamping, `calculate_importance` partial weight handling, `WeightAdapter` signal coverage, task error handling in MCP, `get_by_ids` chunking, `search_content` LIKE escaping, and `snips_sum_w` deduplication.\n</details>\n\n<details>\n<summary><b>Ignored Files</b></summary>\n\n*   **Ignored by pattern:** `.github/workflows/**` (1)\n    *   .github/workflows/benchmark.yml\n</details>\n\n<details>\n<summary><b>Activity</b></summary>\n\n* 12 new production-grade tests were added to `tests/test_ingestion_discovery.py`.\n* The full test suite now passes with 938 tests, addressing all Gemini Code Assist review comments.\n* New test files `tests/test_v3_15_0_ci_token_rotation.py` and `tests/test_v3_15_0_kaizen_fixes.py` were added to cover Phase 18 features and various bug fixes.\n</details>\n\n<details>\n<summary><b>Using Gemini Code Assist</b></summary>\n<br>\n\nThe full guide for Gemini Code Assist can be found on our [documentation page](https://developers.google.com/gemini-code-assist/docs/review-github-code), here are some quick tips.\n\n<b>Invoking Gemini</b>\n\nYou can request assistance from Gemini at any point by creating a comment using either `/gemini <command>` or `@gemini-code-assist <command>`. Below is a summary of the supported commands on the current page.\n\nFeature | Command | Description\n--- | --- | ---\nCode Review | `/gemini review` | Performs a code review for the current pull request in its current state.\nPull Request Summary | `/gemini summary` | Provides a summary of the current pull request in its current state.\nComment | @gemini-code-assist | Responds in comments when explicitly tagged, both in pull request comments and review comments.\nHelp | `/gemini help` | Displays a list of available commands.\n\n<b>Customization</b>\n\nTo customize Gemini Code Assist for GitHub experience, repository maintainers can create a configuration file and/or provide a custom code review style guide (such as PEP-8 for Python) by creating and adding files to a `.gemini/` folder in the base of the repository. Detailed instructions can be found [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github).\n\n<b>Limitations & Feedback</b>\n\nGemini Code Assist may make mistakes. Please leave feedback on any instances where its feedback is incorrect or counter productive. You can react with :thumbsup: and :thumbsdown: on @gemini-code-assist comments. If you're interested in giving your feedback about your experience with Gemini Code Assist for Github and other Google products, sign up [here](https://google.qualtrics.com/jfe/form/SV_2cyuGuTWsEw84yG).\n\n<b>You can also get AI-powered code generation, chat, as well as code reviews directly in the IDE at no cost with the [Gemini Code Assist IDE Extension](https://cloud.google.com/products/gemini/code-assist).</b>\n</details>\n\n\n[^1]: Review the [Privacy Notices](https://policies.google.com/privacy), [Generative AI Prohibited Use Policy](https://policies.google.com/terms/generative-ai/use-policy), [Terms of Service](https://policies.google.com/terms), and learn how to configure Gemini Code Assist in GitHub [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github). Gemini can make mistakes, so double check it and [use code with caution](https://support.google.com/legal/answer/13505487).\n","createdAt":"2026-02-20T02:54:22Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/48#issuecomment-3931307785","viewerDidAuthor":false}],"number":48,"reviews":[{"id":"PRR_kwDORPE6j87kQ2kn","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Code Review\n\nThis pull request introduces legacy data discovery for Aider, Continue.dev, and Zed, a UI overhaul in `dashboard.html`, backend improvements including a critical bug fix in `muninn/core/memory.py`, and general security enhancements. However, it introduces a critical security vulnerability by adding a wildcard CORS policy while leaving new legacy ingestion endpoints unauthenticated, which could allow any website to interact with the local Muninn server to leak private chat histories. Furthermore, some new UI components are still vulnerable to XSS through error message rendering, and it is suggested to consistently use DOM manipulation instead of `innerHTML` to further harden the UI against XSS.","submittedAt":"2026-02-20T02:57:25Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"8a6af20153fc4b9008f4430ffe0f1edcc0fe67b8"}}],"title":"feat(phase17): legacy discovery auto-scan + selective ingestion UI (v3.17.0)"},{"comments":[{"id":"IC_kwDORPE6j87qUa6L","author":{"login":"chatgpt-codex-connector"},"authorAssociation":"NONE","body":"You have reached your Codex usage limits for code reviews. You can see your limits in the [Codex usage dashboard](https://chatgpt.com/codex/settings/usage).\nTo continue using code reviews, you can upgrade your account or add credits to your account and enable them for code reviews in your [settings](https://chatgpt.com/codex/settings/code-review).","createdAt":"2026-02-20T02:22:28Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/47#issuecomment-3931221643","viewerDidAuthor":false},{"id":"IC_kwDORPE6j87qUbVB","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Summary of Changes\n\nHello @wjohns989, I'm Gemini Code Assist[^1]! I'm currently reviewing this pull request and will post my feedback shortly. In the meantime, here's a summary to help you and other reviewers quickly get up to speed!\n\nThis pull request delivers a comprehensive set of fixes and enhancements identified during a Kaizen review of the Muninn MCP codebase. The changes span critical security improvements, core logic corrections, and robustness upgrades, ensuring the system operates more reliably and securely. Additionally, it introduces significant user interface and operational tooling improvements, such as a redesigned control center and an automated token rotation utility, streamlining management and improving the developer experience.\n\n### Highlights\n\n* **Security & Production Portability (P1)**: Removed hardcoded debug log file writes in `handlers.py` that could lead to silent data leakage in production builds, replacing them with `logger.debug()` calls.\n* **Correctness & Contract Violations (P2)**: Clamped `calculate_frequency()` return values to `[0, 1]` to prevent importance scores from exceeding 1.0, and guarded `calculate_importance()` against `KeyError` for partial custom weight dictionaries. Added 'chain' and 'goal' signals to `DEFAULT_WEIGHTS` in `weight_adapter.py` for comprehensive entropy adaptation. Fixed `handle_get_task_result()` to route task errors through the JSON-RPC error channel, correcting a protocol violation. Eliminated duplicate `get_flags()` and `OTelGenAITracer()` initialization in `core/memory.py` for cleaner and more efficient telemetry setup.\n* **Robustness & Edge Cases (P3)**: Implemented chunking for `get_by_ids()` in `sqlite_metadata.py` to handle large ID lists within SQLite's variable limit, preventing `OperationalError`. Escaped LIKE metacharacters in `search_content()` to ensure user queries are treated as literals. Removed a redundant `snips_total` dictionary, consolidating its function into `snips_sum_w`. Replaced a non-ASCII arrow with an ASCII equivalent in `consolidation/promote.py`.\n* **Dashboard & Server Enhancements**: Introduced a full redesign of the Muninn Control Center UI in `dashboard.html` and added `CORSMiddleware` to `server.py` to enable standalone dashboard access.\n* **CI/CD & Token Management**: Added a new CLI utility (`muninn/cli.py`) for rotating authentication tokens, including auto-patching of MCP host configurations and platform-specific instructions. Updated version to `3.15.0` across `muninn/version.py` and `pyproject.toml`.\n\n<details>\n<summary><b>Changelog</b></summary>\n\n* **HANDOFF.md**\n    * Updated version to `v3.15.0` and branch details to `feature/v3.15.0-phase18-ci-workflow-token-rotation`.\n    * Revised test pass count to 890 and updated Phase 17 status to merged.\n    * Added Phase 18 deliverables for CI benchmark workflow and token rotation utility, marking them as in progress.\n    * Shifted previous Phase 18 candidates to Phase 19 and updated the 'Known Remaining Gap' accordingly.\n* **SOTA_PLUS_PLAN.md**\n    * Updated 'Future Work (Phase 18 candidates)' to 'Phase 19 candidates'.\n    * Added a new section for 'Phase 18: CI Benchmark Workflow & Token Rotation (v3.15.0)' detailing its goals, GitHub Actions CI track, and Token Rotation CLI track.\n    * Included ROI/Optimization Notes for Phase 18 features.\n    * Defined a new environment variable `MUNINN_TOKEN_FILE` for Phase 18.\n    * Updated 'Validation History' to reflect Phase 18 test results and adjusted Phase 17 details.\n* **dashboard.html**\n    * Redesigned the Muninn Control Center UI with a new color palette, layout, and responsive design.\n    * Implemented a sidebar navigation for different views (Overview, Ingestion, Legacy Import, System).\n    * Added new UI components like help boxes, stats grid, and a canvas for graph visualization.\n    * Refactored JavaScript logic for view switching, mobile menu toggle, and API request handling.\n    * Updated preference fields and removed some UI elements by making them hidden inputs to simplify the interface.\n* **muninn/cli.py**\n    * Added a new CLI utility for `muninn.cli` with a `rotate-token` command.\n    * Implemented functionality to generate URL-safe tokens, write them to a specified file, and auto-patch MCP host configurations.\n    * Provided platform-specific instructions for applying new tokens.\n    * Included `--dry-run` and `--token-only` options for flexible usage.\n* **muninn/consolidation/promote.py**\n    * Replaced a non-ASCII arrow character `‚Üí` with an ASCII `->` in a log message for better compatibility.\n* **muninn/core/memory.py**\n    * Removed a duplicate initialization block for `get_flags()` and `OTelGenAITracer()`.\n    * Ensured `flags` are read and the OTel instance is created only once.\n    * Modified the `HybridRetriever` initialization to directly wire the `_otel` instance, removing a post-hoc patch.\n* **muninn/mcp/handlers.py**\n    * Removed hardcoded `open()` calls that wrote to `mcp_debug.log`, replacing them with `logger.debug()` for task acceptance logging.\n    * Fixed `handle_get_task_result()` to send task errors via `send_error_fn` (JSON-RPC error channel) instead of wrapping them in a result payload.\n    * Removed a stale commented-out debug print line in `_do_search_memory`.\n* **muninn/retrieval/weight_adapter.py**\n    * Added 'chain' and 'goal' signals with default weights to `DEFAULT_WEIGHTS`.\n    * Ensured all six RRF signals are covered for entropy-based adaptation, preventing silent fallbacks for 'chain' and 'goal'.\n* **muninn/scoring/importance.py**\n    * Clamped the return value of `calculate_frequency()` to `[0, 1]` to prevent values greater than 1.0.\n    * Modified `calculate_importance()` to use `.get()` with `DEFAULT_WEIGHTS` fallbacks, guarding against `KeyError` when partial custom weight dictionaries are provided.\n* **muninn/store/sqlite_metadata.py**\n    * Implemented chunking for `get_by_ids()` using `_SQLITE_MAX_VARS` (900) to avoid SQLite's 999-bound-variable limit for large ID lists.\n    * Escaped LIKE metacharacters (`%`, `_`, `\\`) in `search_content()` with an `ESCAPE '\\'` clause to treat user query text as literals.\n    * Removed the redundant `snips_total` dictionary, consolidating its function into `snips_sum_w` for SNIPS denominator and Kish effective-sample-size weight sum.\n* **muninn/version.py**\n    * Updated the `__version__` string from `3.14.0` to `3.15.0`.\n* **pyproject.toml**\n    * Updated the project `version` from `3.14.0` to `3.15.0`.\n* **server.py**\n    * Added `CORSMiddleware` to the FastAPI application, allowing all origins (`*`) for standalone dashboard access.\n* **tests/test_v3_14_0_benchmark_suite.py**\n    * Updated version assertion to check for `>= 3.14.0` instead of exact `3.14.0`.\n    * Modified `test_pyproject_toml_version_matches` to dynamically extract and compare the version from `pyproject.toml` against `muninn.version`.\n* **tests/test_v3_15_0_ci_token_rotation.py**\n    * Added a new test file to cover the CI Benchmark Workflow and Token Rotation features.\n    * Included tests for `benchmark.yml` structure, `muninn.cli rotate-token` command functionality, token file persistence, MCP config patching, and version bump validation.\n* **tests/test_v3_15_0_kaizen_fixes.py**\n    * Added a new test file specifically for the v3.15.0 Kaizen review fixes.\n    * Included tests for debug log removal, frequency clamp, partial weights handling, weight adapter signal coverage, JSON-RPC error channel, `get_by_ids` chunking, LIKE metacharacter escaping, and SNIPS dict deduplication.\n</details>\n\n<details>\n<summary><b>Ignored Files</b></summary>\n\n*   **Ignored by pattern:** `.github/workflows/**` (1)\n    *   .github/workflows/benchmark.yml\n</details>\n\n<details>\n<summary><b>Activity</b></summary>\n\n* The pull request introduces 36 new production-grade tests in `tests/test_v3_15_0_kaizen_fixes.py` covering every fix.\n* The full test suite now passes with 926 tests, 2 skipped, and 0 failed (890 baseline + 36 new).\n* Patch targets have been verified against actual module import chains.\n</details>\n\n<details>\n<summary><b>Using Gemini Code Assist</b></summary>\n<br>\n\nThe full guide for Gemini Code Assist can be found on our [documentation page](https://developers.google.com/gemini-code-assist/docs/review-github-code), here are some quick tips.\n\n<b>Invoking Gemini</b>\n\nYou can request assistance from Gemini at any point by creating a comment using either `/gemini <command>` or `@gemini-code-assist <command>`. Below is a summary of the supported commands on the current page.\n\nFeature | Command | Description\n--- | --- | ---\nCode Review | `/gemini review` | Performs a code review for the current pull request in its current state.\nPull Request Summary | `/gemini summary` | Provides a summary of the current pull request in its current state.\nComment | @gemini-code-assist | Responds in comments when explicitly tagged, both in pull request comments and review comments.\nHelp | `/gemini help` | Displays a list of available commands.\n\n<b>Customization</b>\n\nTo customize Gemini Code Assist for GitHub experience, repository maintainers can create a configuration file and/or provide a custom code review style guide (such as PEP-8 for Python) by creating and adding files to a `.gemini/` folder in the base of the repository. Detailed instructions can be found [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github).\n\n<b>Limitations & Feedback</b>\n\nGemini Code Assist may make mistakes. Please leave feedback on any instances where its feedback is incorrect or counter productive. You can react with :thumbsup: and :thumbsdown: on @gemini-code-assist comments. If you're interested in giving your feedback about your experience with Gemini Code Assist for Github and other Google products, sign up [here](https://google.qualtrics.com/jfe/form/SV_2cyuGuTWsEw84yG).\n\n<b>You can also get AI-powered code generation, chat, as well as code reviews directly in the IDE at no cost with the [Gemini Code Assist IDE Extension](https://cloud.google.com/products/gemini/code-assist).</b>\n</details>\n\n\n[^1]: Review the [Privacy Notices](https://policies.google.com/privacy), [Generative AI Prohibited Use Policy](https://policies.google.com/terms/generative-ai/use-policy), [Terms of Service](https://policies.google.com/terms), and learn how to configure Gemini Code Assist in GitHub [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github). Gemini can make mistakes, so double check it and [use code with caution](https://support.google.com/legal/answer/13505487).\n","createdAt":"2026-02-20T02:22:52Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/47#issuecomment-3931223361","viewerDidAuthor":false}],"number":47,"reviews":[{"id":"PRR_kwDORPE6j87kQfJN","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Code Review\n\nThis pull request introduces fixes and enhancements to the Muninn codebase, improving security, correctness, and robustness by removing hardcoded debug log paths, correcting JSON-RPC protocol violations, and implementing SQLite query chunking. It also adds a token rotation utility and a redesigned dashboard. However, the changes introduce multiple Cross-Site Scripting (XSS) vulnerabilities in the new dashboard UI due to `innerHTML` with untrusted data, and a permissive CORS policy in `server.py`. Further review is needed to harden the security of the token rotation utility and refine the CORS configuration.","submittedAt":"2026-02-20T02:25:05Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"73051a4110cb948afd3ad6f7919c7b73c020e4ec"}}],"title":"feat(kaizen): comprehensive codebase review fixes v3.15.0"},{"comments":[{"id":"IC_kwDORPE6j87qQUZU","author":{"login":"chatgpt-codex-connector"},"authorAssociation":"NONE","body":"You have reached your Codex usage limits for code reviews. You can see your limits in the [Codex usage dashboard](https://chatgpt.com/codex/settings/usage).\nTo continue using code reviews, you can upgrade your account or add credits to your account and enable them for code reviews in your [settings](https://chatgpt.com/codex/settings/code-review).","createdAt":"2026-02-19T21:22:24Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/46#issuecomment-3930146388","viewerDidAuthor":false},{"id":"IC_kwDORPE6j87qQU08","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Summary of Changes\n\nHello @wjohns989, I'm Gemini Code Assist[^1]! I'm currently reviewing this pull request and will post my feedback shortly. In the meantime, here's a summary to help you and other reviewers quickly get up to speed!\n\nThis pull request significantly enhances the project's operational infrastructure by introducing an automated CI gate for benchmark regressions and a streamlined utility for secure token rotation. These changes aim to improve code quality, prevent performance regressions, and simplify credential management across various development environments, thereby boosting overall development efficiency and security posture.\n\n### Highlights\n\n* **CI Benchmark Workflow**: A new GitHub Actions workflow (`.github/workflows/benchmark.yml`) was implemented to automatically run dry-run benchmarks on pull requests targeting `main`, pushes to `main`, and via manual dispatch. This workflow parses benchmark reports into GitHub Step Summaries, uploads the full JSON report as an artifact, and hard-fails the job if `overall_passed=false` to prevent regressions.\n* **Token Rotation Utility**: A new command-line utility (`python -m muninn.cli rotate-token`) was added to generate cryptographically secure, URL-safe authentication tokens. This utility writes the new token to a configurable file (`.muninn_token`) and automatically patches the `MUNINN_AUTH_TOKEN` in detected MCP host configurations (e.g., Claude Desktop, Cursor, VS Code). It supports `--dry-run` and `--token-only` flags and provides platform-specific instructions for token application.\n* **Version Bump**: The project version was updated from `3.14.0` to `3.15.0` in both `muninn/version.py` and `pyproject.toml`.\n* **New Test Suite**: A comprehensive test suite (`tests/test_v3_15_0_ci_token_rotation.py`) was added, comprising 39 new tests across 5 classes. These tests validate the structure and correctness of the CI workflow, the functionality of the token rotation CLI, token file persistence logic, MCP configuration patching, and the version bump.\n\n<details>\n<summary><b>Changelog</b></summary>\n\n* **HANDOFF.md**\n    * Updated the branch, version, and status to reflect Phase 18 as in progress.\n    * Increased the total test count to 890, incorporating 39 new Phase 18 tests.\n    * Marked Phase 17 as merged and explicitly listed Phase 18 as 'IN PROGRESS'.\n    * Revised the 'Open Items / Next Steps' section to reflect completed Phase 18 deliverables and reclassified previous Phase 18 candidates as Phase 19.\n* **SOTA_PLUS_PLAN.md**\n    * Renamed 'Future Work (Phase 18 candidates)' to 'Future Work (Phase 19 candidates)'.\n    * Introduced a new section, 'Phase 18: CI Benchmark Workflow & Token Rotation (v3.15.0)', detailing the functionality and ROI of the new features.\n    * Updated the validation history to include Phase 18 test counts and status, and clarified Phase 17's merged status.\n    * Added `MUNINN_TOKEN_FILE` as a new environment variable for Phase 18.\n* **muninn/cli.py**\n    * Added a new Python command-line interface utility.\n    * Implemented the `rotate-token` command for generating, writing, and patching authentication tokens.\n    * Included logic for token generation, writing to a configurable file, and patching MCP host configurations.\n    * Provided argument parsing for `--dry-run`, `--token-only`, and `--token-file` options.\n* **muninn/version.py**\n    * Updated the `__version__` string from \"3.14.0\" to \"3.15.0\".\n* **pyproject.toml**\n    * Updated the `project.version` field from \"3.14.0\" to \"3.15.0\".\n* **tests/test_v3_14_0_benchmark_suite.py**\n    * Modified the version assertion logic to check for `>= 3.14.0` instead of `== 3.14.0`.\n    * Improved the `pyproject.toml` version check to use regex and compare against `muninn.version.__version__`.\n* **tests/test_v3_15_0_ci_token_rotation.py**\n    * Added a new test file containing 5 test classes for Phase 18 features.\n    * Included tests for CI workflow YAML structure, `muninn.cli rotate-token` command, token file resolution, MCP config patching, and version bump validation.\n</details>\n\n<details>\n<summary><b>Ignored Files</b></summary>\n\n*   **Ignored by pattern:** `.github/workflows/**` (1)\n    *   .github/workflows/benchmark.yml\n</details>\n\n<details>\n<summary><b>Activity</b></summary>\n\n* No human activity has been recorded on this pull request yet.\n</details>\n\n<details>\n<summary><b>Using Gemini Code Assist</b></summary>\n<br>\n\nThe full guide for Gemini Code Assist can be found on our [documentation page](https://developers.google.com/gemini-code-assist/docs/review-github-code), here are some quick tips.\n\n<b>Invoking Gemini</b>\n\nYou can request assistance from Gemini at any point by creating a comment using either `/gemini <command>` or `@gemini-code-assist <command>`. Below is a summary of the supported commands on the current page.\n\nFeature | Command | Description\n--- | --- | ---\nCode Review | `/gemini review` | Performs a code review for the current pull request in its current state.\nPull Request Summary | `/gemini summary` | Provides a summary of the current pull request in its current state.\nComment | @gemini-code-assist | Responds in comments when explicitly tagged, both in pull request comments and review comments.\nHelp | `/gemini help` | Displays a list of available commands.\n\n<b>Customization</b>\n\nTo customize Gemini Code Assist for GitHub experience, repository maintainers can create a configuration file and/or provide a custom code review style guide (such as PEP-8 for Python) by creating and adding files to a `.gemini/` folder in the base of the repository. Detailed instructions can be found [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github).\n\n<b>Limitations & Feedback</b>\n\nGemini Code Assist may make mistakes. Please leave feedback on any instances where its feedback is incorrect or counter productive. You can react with :thumbsup: and :thumbsdown: on @gemini-code-assist comments. If you're interested in giving your feedback about your experience with Gemini Code Assist for Github and other Google products, sign up [here](https://google.qualtrics.com/jfe/form/SV_2cyuGuTWsEw84yG).\n\n<b>You can also get AI-powered code generation, chat, as well as code reviews directly in the IDE at no cost with the [Gemini Code Assist IDE Extension](https://cloud.google.com/products/gemini/code-assist).</b>\n</details>\n\n\n[^1]: Review the [Privacy Notices](https://policies.google.com/privacy), [Generative AI Prohibited Use Policy](https://policies.google.com/terms/generative-ai/use-policy), [Terms of Service](https://policies.google.com/terms), and learn how to configure Gemini Code Assist in GitHub [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github). Gemini can make mistakes, so double check it and [use code with caution](https://support.google.com/legal/answer/13505487).\n","createdAt":"2026-02-19T21:22:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/46#issuecomment-3930148156","viewerDidAuthor":false}],"number":46,"reviews":[{"id":"PRR_kwDORPE6j87kNEnH","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Code Review\n\nThis pull request introduces a CI benchmark workflow and a token rotation utility, which are valuable for maintaining code quality and improving operational security. While the new `muninn/cli.py` for token rotation is well-structured and correctly uses the `secrets` module for secure generation, a critical security vulnerability exists: the generated token is persisted to a file with default system permissions, potentially allowing unauthorized access on multi-user systems. It is strongly recommended to add a step to restrict the file permissions immediately after writing the token. The updated tests also provide good coverage for the new functionalities.","submittedAt":"2026-02-19T21:26:06Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"375d647ad4c0da4c53b208b9c07f291463b2bd80"}}],"title":"feat(phase18): CI Benchmark Workflow & Token Rotation Utility (v3.15.0)"},{"comments":[{"id":"IC_kwDORPE6j87qN1YU","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Summary of Changes\n\nHello @wjohns989, I'm Gemini Code Assist[^1]! I'm currently reviewing this pull request and will post my feedback shortly. In the meantime, here's a summary to help you and other reviewers quickly get up to speed!\n\nThis pull request significantly enhances the Muninn project by addressing critical gaps in benchmarking and security. It establishes a robust framework for evaluating memory system performance through synthetic datasets and an automated pipeline, enabling consistent and reliable testing. Concurrently, it fortifies the system's resilience against document-based vulnerabilities by sandboxing binary file parsing, thereby preventing potential server compromises and improving overall operational security.\n\n### Highlights\n\n* **Synthetic Benchmark Dataset Suite**: Introduced 30 LongMemEval-format benchmark cases and 30 StructMemEval-format cases, designed for realistic Muninn-domain conversations and factoid recall across adapter schema variants. These datasets are now committed to the repository.\n* **Automated Benchmark Pipeline**: Implemented a headless CI benchmark pipeline (`eval/run_benchmark.py`) supporting dry-run (CI-safe, no server) and production (live server) modes. It includes gate evaluation for LongMemEval and StructMemEval, outputting a `BenchmarkRunReport` JSON.\n* **Parser Security Sandbox**: Developed a security sandbox for PDF/DOCX parsing, isolating these operations in a child subprocess (`muninn/ingestion/_parser_subprocess.py`) via a new sandbox executor (`muninn/ingestion/sandbox.py`). This protects the main Muninn server from potential exploits or resource exhaustion from malicious documents.\n\n<details>\n<summary><b>Changelog</b></summary>\n\n* **.gitignore**\n    * Updated to explicitly include curated benchmark datasets in `eval/data/` while maintaining general `data/` directory exclusion.\n* **HANDOFF.md**\n    * Updated the branch name, version number to v3.14.0, and total passing test count to 848.\n    * Marked Phase 16 as MERGED and Phase 17 as COMPLETE.\n    * Added a detailed summary of Phase 17 changes, including synthetic datasets, automated benchmark runner, and parser security sandbox.\n* **SOTA_PLUS_PLAN.md**\n    * Added a new section for Phase 17, detailing its background, implementation checklist, key correctness properties, security impact analysis, and optimization notes.\n    * Updated the validation history to reflect Phase 17 completion with 848 tests passed.\n* **eval/data/longmemeval_synthetic_v1.jsonl**\n    * Added a new JSONL file containing 30 synthetic LongMemEval-format benchmark cases, covering five question types.\n* **eval/data/structmemeval_suite_v1.jsonl**\n    * Added a new JSONL file containing 30 synthetic StructMemEval-format benchmark cases, covering four answer types.\n* **eval/run_benchmark.py**\n    * Added a new Python script implementing the automated benchmark pipeline, supporting dry-run and production modes, gate evaluation, and JSON report generation.\n* **muninn/ingestion/_parser_subprocess.py**\n    * Added a new Python script that acts as a subprocess worker for sandboxed PDF/DOCX parsing, communicating via JSON over stdout with output size limits.\n* **muninn/ingestion/parser.py**\n    * Modified `_parse_pdf` and `_parse_docx` functions to route parsing through the new `sandboxed_parse_binary` function for process isolation.\n* **muninn/ingestion/sandbox.py**\n    * Added a new Python module providing `sandboxed_parse_binary`, a function to execute binary file parsing in an isolated subprocess with timeout enforcement and output caps.\n* **muninn/version.py**\n    * Updated the `__version__` string from \"3.13.0\" to \"3.14.0\".\n* **pyproject.toml**\n    * Updated the project `version` field from \"3.13.0\" to \"3.14.0\".\n* **tests/test_v3_13_0_sota_verdict_v1.py**\n    * Updated the version assertion in `test_version_is_3_13_0` to check for `>= (3, 13, 0)` instead of an exact match, allowing for future version bumps.\n* **tests/test_v3_14_0_benchmark_suite.py**\n    * Added a new test suite with 60 tests across 8 classes, covering the integrity of new synthetic datasets, benchmark runner logic, and parser sandbox functionality.\n</details>\n\n<details>\n<summary><b>Activity</b></summary>\n\n* The pull request introduces 60 new tests across 8 classes, covering dataset integrity, pipeline gate logic, sandbox correctness, subprocess worker, and version consistency.\n* The full test suite now reports 848 passed tests, 2 skipped, and 0 failed, indicating successful integration of new features.\n* The project version has been updated from `3.13.0` to `3.14.0` in `muninn/version.py` and `pyproject.toml`.\n* An existing version assertion in `test_v3_13_0_sota_verdict_v1.py` was updated to be more flexible, checking for `>= (3,13,0)`.\n</details>\n\n<details>\n<summary><b>Using Gemini Code Assist</b></summary>\n<br>\n\nThe full guide for Gemini Code Assist can be found on our [documentation page](https://developers.google.com/gemini-code-assist/docs/review-github-code), here are some quick tips.\n\n<b>Invoking Gemini</b>\n\nYou can request assistance from Gemini at any point by creating a comment using either `/gemini <command>` or `@gemini-code-assist <command>`. Below is a summary of the supported commands on the current page.\n\nFeature | Command | Description\n--- | --- | ---\nCode Review | `/gemini review` | Performs a code review for the current pull request in its current state.\nPull Request Summary | `/gemini summary` | Provides a summary of the current pull request in its current state.\nComment | @gemini-code-assist | Responds in comments when explicitly tagged, both in pull request comments and review comments.\nHelp | `/gemini help` | Displays a list of available commands.\n\n<b>Customization</b>\n\nTo customize Gemini Code Assist for GitHub experience, repository maintainers can create a configuration file and/or provide a custom code review style guide (such as PEP-8 for Python) by creating and adding files to a `.gemini/` folder in the base of the repository. Detailed instructions can be found [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github).\n\n<b>Limitations & Feedback</b>\n\nGemini Code Assist may make mistakes. Please leave feedback on any instances where its feedback is incorrect or counter productive. You can react with :thumbsup: and :thumbsdown: on @gemini-code-assist comments. If you're interested in giving your feedback about your experience with Gemini Code Assist for Github and other Google products, sign up [here](https://google.qualtrics.com/jfe/form/SV_2cyuGuTWsEw84yG).\n\n<b>You can also get AI-powered code generation, chat, as well as code reviews directly in the IDE at no cost with the [Gemini Code Assist IDE Extension](https://cloud.google.com/products/gemini/code-assist).</b>\n</details>\n\n\n[^1]: Review the [Privacy Notices](https://policies.google.com/privacy), [Generative AI Prohibited Use Policy](https://policies.google.com/terms/generative-ai/use-policy), [Terms of Service](https://policies.google.com/terms), and learn how to configure Gemini Code Assist in GitHub [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github). Gemini can make mistakes, so double check it and [use code with caution](https://support.google.com/legal/answer/13505487).\n","createdAt":"2026-02-19T19:37:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/45#issuecomment-3929495060","viewerDidAuthor":false}],"number":45,"reviews":[{"id":"PRR_kwDORPE6j87kLHBp","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Code Review\n\nThis pull request introduces two major, well-executed features: a comprehensive synthetic benchmark suite and a critical security enhancement through a parser sandbox. The implementation of the subprocess-based sandbox for PDF/DOCX parsing is robust, significantly mitigating risks from potentially malicious files. The new benchmark runner and datasets are also valuable additions, enabling automated, CI-friendly performance gating. The code quality is high, and the test coverage is excellent. I have a couple of suggestions to improve consistency and robustness in the new benchmark runner script.","submittedAt":"2026-02-19T19:40:01Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"7905027759661b5a336cc32e6ac7d9a8301adf7f"}},{"id":"PRR_kwDORPE6j87kLJGj","author":{"login":"chatgpt-codex-connector"},"authorAssociation":"NONE","body":"\n### üí° Codex Review\n\nHere are some automated review suggestions for this pull request.\n\n**Reviewed commit:** `7905027759`\n    \n\n<details> <summary>‚ÑπÔ∏è About Codex in GitHub</summary>\n<br/>\n\n[Your team has set up Codex to review pull requests in this repo](http://chatgpt.com/codex/settings/general). Reviews are triggered when you\n- Open a pull request for review\n- Mark a draft as ready\n- Comment \"@codex review\".\n\nIf Codex has suggestions, it will comment; otherwise it will react with üëç.\n\n\n\n\nCodex can also answer questions or update the PR. Try commenting \"@codex address that feedback\".\n            \n</details>","submittedAt":"2026-02-19T19:41:52Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"7905027759661b5a336cc32e6ac7d9a8301adf7f"}},{"id":"PRR_kwDORPE6j87kML0b","author":{"login":"wjohns989"},"authorAssociation":"OWNER","body":"All four reviewer comments addressed in commit 3a4d98d:\n\n**Codex P1 ‚Äî Wrong SME metric keys**: Fixed `_run_structmemeval` to read `mean_exact_match` / `mean_token_f1` / `mean_mrr_at_k` (matching the adapter's `AdapterReport` top-level output). Updated `_evaluate_sme_gate` to use the same keys. Updated 3 test fixtures accordingly.\n\n**Codex P1 ‚Äî Sandbox env isolation**: Added `_make_sandbox_env()` with an explicit allowlist (`PATH`, Windows system vars, POSIX essentials, Python runtime vars). `subprocess.run` now receives `env=_make_sandbox_env()` so `MUNINN_AUTH_TOKEN`, API keys, and DB credentials are never visible to a compromised child process. Added 3 new tests: strips sensitive vars, preserves PATH, verifies `env=` kwarg is passed.\n\n**Gemini Medium ‚Äî Consistent `passed` logic**: `_run_longmemeval` now uses exit-code-only for `passed` (same as `_run_structmemeval`). Gate logic already handles the `selftest_pass_no_metrics` path for cases where metrics are absent.\n\n**Gemini Medium ‚Äî `-m` module invocation**: `_run_structmemeval` now uses `python -m eval.structmemeval_adapter` (cwd-independent module form), matching `_run_longmemeval`'s pattern.\n\nBonus: Fixed remaining `datetime.utcnow()` ‚Üí `datetime.now(timezone.utc)` in CLI `main()`.\n\nSuite: **851 passed, 2 skipped, 0 failed**.","submittedAt":"2026-02-19T20:39:51Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"3a4d98d40b15d02d495a8b0c6ebdaca243d28f45"}}],"title":"feat(phase17): Synthetic Benchmark Suite & Parser Security Sandbox (v3.14.0)"},{"comments":[{"id":"IC_kwDORPE6j87p7O7S","author":{"login":"chatgpt-codex-connector"},"authorAssociation":"NONE","body":"You have reached your Codex usage limits for code reviews. You can see your limits in the [Codex usage dashboard](https://chatgpt.com/codex/settings/usage).\nTo continue using code reviews, you can upgrade your account or add credits to your account and enable them for code reviews in your [settings](https://chatgpt.com/codex/settings/code-review).","createdAt":"2026-02-19T04:25:49Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/44#issuecomment-3924618962","viewerDidAuthor":false},{"id":"IC_kwDORPE6j87p7PC3","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Summary of Changes\n\nHello @wjohns989, I'm Gemini Code Assist[^1]! I'm currently reviewing this pull request and will post my feedback shortly. In the meantime, here's a summary to help you and other reviewers quickly get up to speed!\n\nThis pull request marks the beginning of Phase 15 (v3.12.0) for the Muninn project, with a primary focus on enhancing operational correctness, activating the KuzuDB-based graph memory chains, and addressing the final gaps required for a credible, external-benchmark-grounded SOTA+ verdict. The changes primarily involve comprehensive documentation updates to outline the new phase's objectives and implementation strategy, alongside a standard version increment.\n\n### Highlights\n\n* **Documentation Updates**: Updated key project documentation files, including `README.md`, `HANDOFF.md`, and `SOTA_PLUS_PLAN.md`, to reflect the transition to v3.12.0 and the initiation of Phase 15.\n* **Version Bump**: Incremented the project version to `3.12.0` in both `muninn/version.py` and `pyproject.toml`.\n* **Phase 15 Planning**: Detailed the strategic plan for Phase 15, focusing on operational hardening, graph activation, and SOTA+ observability, complete with implementation checklists, correctness properties, and ROI analysis.\n\n<details>\n<summary><b>Changelog</b></summary>\n\n* **HANDOFF.md**\n    * Updated the document's status to reflect Phase 14 as merged and Phase 15 as in progress.\n    * Revised the \"Open Items / Next Steps\" section to remove merged PR #43 and add specific Phase 15 priorities like auth propagation, graph chains, OTel validation, and LongMemEval adapter.\n* **README.md**\n    * Restored the `muninn_banner.jpeg` image.\n    * Updated the project status to v3.11.0 (Phase 14 Complete ‚Äî Phase 15 In Progress) and added test suite status.\n    * Expanded the \"What's New in v3.11.0\" section with detailed feature descriptions.\n    * Revised and expanded the \"Features\" section, categorizing them into Core Memory Engine, Memory Lifecycle, Operational Controls, and Multi-Assistant Interop.\n    * Reorganized and updated the \"Runtime Modes\" and \"MCP Client Configuration\" sections, including an important note about `MUNINN_AUTH_TOKEN` sharing.\n    * Added a comprehensive \"MCP Tools\" table.\n    * Updated \"Python SDK\" and \"REST API\" examples and descriptions, including async client usage.\n    * Introduced a new \"Configuration\" section detailing key environment variables.\n    * Updated the \"Evaluation & Quality Gates\" and \"Data & Security\" sections with more details.\n    * Revised the \"Documentation Index\" with updated and new document references.\n* **SOTA_PLUS_PLAN.md**\n    * Updated the document's version to v3.12.0 and status to \"Phase 15 IN PROGRESS\".\n    * Revised the executive summary to reflect Phase 14 as merged and introduce Phase 15 objectives.\n    * Added a new, detailed \"Phase 15: Operational Hardening & SOTA+ Observability\" section, including background, gap analysis, implementation checklist, key correctness properties, ROI opportunities, and relevant environment variables.\n    * Updated the \"Validation History\" to reflect PR #43 merged and add Phase 14.1 review comments resolution.\n* **muninn/version.py**\n    * Updated the `__version__` string from `3.11.0` to `3.12.0`.\n* **pyproject.toml**\n    * Updated the `project.version` field from `3.11.0` to `3.12.0`.\n</details>\n\n<details>\n<summary><b>Activity</b></summary>\n\n* The pull request introduces Phase 15, focusing on operational hardening and SOTA+ observability, indicating a new strategic development cycle.\n* Documentation and versioning updates have been applied, setting the foundational context for the upcoming development phase.\n* A detailed plan for Phase 15, including specific implementation items and a test plan, has been outlined in the PR description and `SOTA_PLUS_PLAN.md`, demonstrating active strategic planning.\n* Existing tests (694) are reported to pass without regressions, with new tests planned to validate the features targeted in Phase 15.\n</details>\n\n<details>\n<summary><b>Using Gemini Code Assist</b></summary>\n<br>\n\nThe full guide for Gemini Code Assist can be found on our [documentation page](https://developers.google.com/gemini-code-assist/docs/review-github-code), here are some quick tips.\n\n<b>Invoking Gemini</b>\n\nYou can request assistance from Gemini at any point by creating a comment using either `/gemini <command>` or `@gemini-code-assist <command>`. Below is a summary of the supported commands on the current page.\n\nFeature | Command | Description\n--- | --- | ---\nCode Review | `/gemini review` | Performs a code review for the current pull request in its current state.\nPull Request Summary | `/gemini summary` | Provides a summary of the current pull request in its current state.\nComment | @gemini-code-assist | Responds in comments when explicitly tagged, both in pull request comments and review comments.\nHelp | `/gemini help` | Displays a list of available commands.\n\n<b>Customization</b>\n\nTo customize Gemini Code Assist for GitHub experience, repository maintainers can create a configuration file and/or provide a custom code review style guide (such as PEP-8 for Python) by creating and adding files to a `.gemini/` folder in the base of the repository. Detailed instructions can be found [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github).\n\n<b>Limitations & Feedback</b>\n\nGemini Code Assist may make mistakes. Please leave feedback on any instances where its feedback is incorrect or counter productive. You can react with :thumbsup: and :thumbsdown: on @gemini-code-assist comments. If you're interested in giving your feedback about your experience with Gemini Code Assist for Github and other Google products, sign up [here](https://google.qualtrics.com/jfe/form/SV_2cyuGuTWsEw84yG).\n\n<b>You can also get AI-powered code generation, chat, as well as code reviews directly in the IDE at no cost with the [Gemini Code Assist IDE Extension](https://cloud.google.com/products/gemini/code-assist).</b>\n</details>\n\n\n[^1]: Review the [Privacy Notices](https://policies.google.com/privacy), [Generative AI Prohibited Use Policy](https://policies.google.com/terms/generative-ai/use-policy), [Terms of Service](https://policies.google.com/terms), and learn how to configure Gemini Code Assist in GitHub [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github). Gemini can make mistakes, so double check it and [use code with caution](https://support.google.com/legal/answer/13505487).\n","createdAt":"2026-02-19T04:26:03Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/44#issuecomment-3924619447","viewerDidAuthor":false},{"id":"IC_kwDORPE6j87qF9pu","author":{"login":"wjohns989"},"authorAssociation":"OWNER","body":"## Status: Superseded by direct merge to main\n\nThe Phase 15 (v3.12.0) work from this branch was merged into main as part of a combined Phase 15+16 delivery on `feature/v3.13.0-sota-verdict-v1`. \n\nCommit history on main:\n- `8c4ba0c` ‚Äî `feat(phase15): implement operational hardening & LongMemEval adapter (v3.12.0)`\n- `da44a94` ‚Äî `feat(phase16): SOTA+ signed verdict v1 & external benchmark closure (v3.13.0)`\n- `ea68c0c` ‚Äî `merge(v3.13.0): Phase 15+16 ‚Äî operational hardening & SOTA+ signed verdict v1`\n\n**Gemini's suggestion** regarding the missing `auth_token` in the async SDK example was valid and has been addressed in commit `2c94b8e` on main.\n\nCurrent state: **788 tests passing, 0 failed** on main (v3.13.0).\n\nClosing this PR as the work is already in main.","createdAt":"2026-02-19T13:48:40Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/44#issuecomment-3927431790","viewerDidAuthor":true},{"id":"IC_kwDORPE6j87qF91b","author":{"login":"wjohns989"},"authorAssociation":"OWNER","body":"Closing ‚Äî work merged to main via feature/v3.13.0-sota-verdict-v1 merge commit ea68c0c. See above comment for full details.","createdAt":"2026-02-19T13:48:47Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/44#issuecomment-3927432539","viewerDidAuthor":true}],"number":44,"reviews":[{"id":"PRR_kwDORPE6j87j5UE0","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Code Review\n\nThis pull request effectively sets the stage for Phase 15 by updating the version to 3.12.0 and significantly overhauling project documentation. The changes to `README.md`, `SOTA_PLUS_PLAN.md`, and `HANDOFF.md` are thorough, greatly improving clarity on features, operational procedures, and project status, which aligns perfectly with the SOTA+ philosophy of precision and quality. I have one suggestion to correct an example in the README to ensure it is fully functional for users.","submittedAt":"2026-02-19T04:29:36Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"68dacd5d92daf10badbf9ad22fba365e04746a93"}}],"title":"feat(memory): Phase 15 ‚Äî Operational Hardening & SOTA+ Observability (v3.12.0)"},{"comments":[{"id":"IC_kwDORPE6j87pzybI","author":{"login":"chatgpt-codex-connector"},"authorAssociation":"NONE","body":"You have reached your Codex usage limits for code reviews. You can see your limits in the [Codex usage dashboard](https://chatgpt.com/codex/settings/usage).\nTo continue using code reviews, you can upgrade your account or add credits to your account and enable them for code reviews in your [settings](https://chatgpt.com/codex/settings/code-review).","createdAt":"2026-02-18T19:10:44Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/43#issuecomment-3922667208","viewerDidAuthor":false},{"id":"IC_kwDORPE6j87pzysx","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Summary of Changes\n\nHello @wjohns989, I'm Gemini Code Assist[^1]! I'm currently reviewing this pull request and will post my feedback shortly. In the meantime, here's a summary to help you and other reviewers quickly get up to speed!\n\nThis pull request significantly enhances the memory management system by introducing strict project-scoped memory, preventing unintended information leakage between different projects. It also incorporates crucial bug fixes identified during a comprehensive audit, improving the reliability and correctness of vector store operations and ColBERT indexing. These changes collectively bolster the system's robustness and agent coherence, especially in multi-project environments, by ensuring memories are accessed and applied in the correct context.\n\n### Highlights\n\n* **Project-Scoped Memory (Phase 14)**: Introduced an explicit `scope` field (`\"project\"` or `\"global\"`) to `MemoryRecord` to prevent cross-project memory leakage, ensuring project-specific instructions remain isolated and enhancing multi-agent coherence.\n* **Critical Bug Fixes (Phase 12.2 Audit)**: Addressed several bugs identified during a comprehensive re-audit, including incorrect UUID5 usage in vector store retrievals, a typo in a filter keyword argument (`filter` to `filters`), and unsafe feature flag access in ColBERT indexing.\n* **ColBERT Centroid Drift Correction**: Ensured that centroid drift checks sample from the correct token collection (`colbert_indexer.collection_name`) instead of the main memory collection, improving the accuracy and relevance of ColBERT re-clustering.\n\n<details>\n<summary><b>Changelog</b></summary>\n\n* **SOTA_PLUS_PLAN.md**\n    * Updated project version from v3.10.0 to v3.11.0 and status to reflect Phase 14 progress.\n    * Revised the executive summary to highlight Phase 13 completion and the goals of Phase 14.\n    * Added a new section detailing the fixes for Phase 12.2 bugs.\n    * Included a comprehensive new section for Phase 14, outlining its background, design, implementation checklist, and impact.\n* **muninn/consolidation/daemon.py**\n    * Corrected the sampling source for ColBERT centroid drift checks to use the token collection.\n    * Fixed a `TypeError` by changing the `filter` keyword argument to `filters` in the `_phase_integrity` vector search call.\n* **muninn/retrieval/colbert_index.py**\n    * Updated `_ensure_centroid_collection` and `_load_centroids` to use the safe `_get_feature_flag` method for feature flag access.\n    * Improved comments regarding the cold-start initialization of centroids.\n* **muninn/store/vector_store.py**\n    * Modified `get_vector` to correctly convert `memory_id` to `UUID5` before retrieving from Qdrant.\n    * Modified `get_vectors` to handle batch `memory_ids` by converting them to `UUID5` for retrieval and mapping results back to original IDs.\n* **tests/test_v3_6_2_security.py**\n    * Adjusted the assertion in `test_integrity_user_scoping` to check for the `filters` keyword argument instead of `filter`.\n</details>\n\n<details>\n<summary><b>Activity</b></summary>\n\n* The pull request includes fixes for 5 bugs identified during a re-audit of previous PR comments (PRs #38‚Äì#42).\n* All 651 existing tests passed, verifying the Phase 12.2 fixes.\n* Phase 13 (Advanced Retrieval & Data Pipeline) has been merged to main (PR #42).\n* Phase 14 introduces an explicit `scope` field to eliminate cross-project memory leakage.\n* The plan includes 25+ new tests for Phase 14 covering scope persistence, fallback filter, strict mode, cross-project isolation, and backward compatibility.\n* Manual testing is planned to verify `global` memory visibility and `project` memory isolation.\n</details>\n\n<details>\n<summary><b>Using Gemini Code Assist</b></summary>\n<br>\n\nThe full guide for Gemini Code Assist can be found on our [documentation page](https://developers.google.com/gemini-code-assist/docs/review-github-code), here are some quick tips.\n\n<b>Invoking Gemini</b>\n\nYou can request assistance from Gemini at any point by creating a comment using either `/gemini <command>` or `@gemini-code-assist <command>`. Below is a summary of the supported commands on the current page.\n\nFeature | Command | Description\n--- | --- | ---\nCode Review | `/gemini review` | Performs a code review for the current pull request in its current state.\nPull Request Summary | `/gemini summary` | Provides a summary of the current pull request in its current state.\nComment | @gemini-code-assist | Responds in comments when explicitly tagged, both in pull request comments and review comments.\nHelp | `/gemini help` | Displays a list of available commands.\n\n<b>Customization</b>\n\nTo customize Gemini Code Assist for GitHub experience, repository maintainers can create a configuration file and/or provide a custom code review style guide (such as PEP-8 for Python) by creating and adding files to a `.gemini/` folder in the base of the repository. Detailed instructions can be found [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github).\n\n<b>Limitations & Feedback</b>\n\nGemini Code Assist may make mistakes. Please leave feedback on any instances where its feedback is incorrect or counter productive. You can react with :thumbsup: and :thumbsdown: on @gemini-code-assist comments. If you're interested in giving your feedback about your experience with Gemini Code Assist for Github and other Google products, sign up [here](https://google.qualtrics.com/jfe/form/SV_2cyuGuTWsEw84yG).\n\n<b>You can also get AI-powered code generation, chat, as well as code reviews directly in the IDE at no cost with the [Gemini Code Assist IDE Extension](https://cloud.google.com/products/gemini/code-assist).</b>\n</details>\n\n\n[^1]: Review the [Privacy Notices](https://policies.google.com/privacy), [Generative AI Prohibited Use Policy](https://policies.google.com/terms/generative-ai/use-policy), [Terms of Service](https://policies.google.com/terms), and learn how to configure Gemini Code Assist in GitHub [here](https://developers.google.com/gemini-code-assist/docs/customize-gemini-behavior-github). Gemini can make mistakes, so double check it and [use code with caution](https://support.google.com/legal/answer/13505487).\n","createdAt":"2026-02-18T19:10:58Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/wjohns989/Muninn/pull/43#issuecomment-3922668337","viewerDidAuthor":false}],"number":43,"reviews":[{"id":"PRR_kwDORPE6j87jyym3","author":{"login":"gemini-code-assist"},"authorAssociation":"CONTRIBUTOR","body":"## Code Review\n\nThis pull request primarily addresses several bugs discovered during an audit of previous work, as documented in Phase 12.2 of the SOTA+ plan. The fixes include correcting UUID handling in the vector store, resolving a keyword argument typo in the consolidation daemon, ensuring safe access to feature flags, and pointing the ColBERT maintenance process to the correct data collection. The associated tests have also been updated.\n\nThe changes are logical, correct, and significantly improve the robustness of the system. I've added a couple of minor suggestions for improving documentation clarity and error handling precision to further align with the project's SOTA+ quality standards.","submittedAt":"2026-02-18T19:14:21Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"b544137e858ec6d0779d2174e03131282a3822e6"}},{"id":"PRR_kwDORPE6j87j5PFr","author":{"login":"wjohns989"},"authorAssociation":"OWNER","body":"","submittedAt":"2026-02-19T04:18:20Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"bc492e2f956bfa4ae5041f823db688961e01595d"}},{"id":"PRR_kwDORPE6j87j5PJe","author":{"login":"wjohns989"},"authorAssociation":"OWNER","body":"","submittedAt":"2026-02-19T04:18:29Z","includesCreatedEdit":false,"reactionGroups":[],"state":"COMMENTED","commit":{"oid":"bc492e2f956bfa4ae5041f823db688961e01595d"}}],"title":"feat(memory): Phase 14 ‚Äî Project-scoped memory with strict isolation (v3.11.0)"}]
